{"id":"bb-0ce","title":"[PRO] Core: Model Discovery & models-api.json Integration","description":"Fetch models.dev/api.json if missing. Add update CLI. Parse and activate providers based on env vars.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T17:27:37Z","created_by":"Megatherium","updated_at":"2026-02-21T22:06:33Z","closed_at":"2026-02-21T22:06:33Z","close_reason":"Task complete, reviewed, and refined","dependencies":[{"issue_id":"bb-0ce","depends_on_id":"bb-0lc","type":"blocks","created_at":"2026-02-21T22:23:07Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-0ce","depends_on_id":"bb-azk","type":"blocks","created_at":"2026-02-21T22:39:49Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-0lc","title":"Review: [PRO] Core: Model Discovery & models-api.json Integration","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T21:22:52Z","created_by":"Megatherium","updated_at":"2026-02-21T22:06:22Z","closed_at":"2026-02-21T22:06:22Z","close_reason":"Review completed and refinement implemented","dependencies":[{"issue_id":"bb-0lc","depends_on_id":"bb-64l","type":"blocks","created_at":"2026-02-21T22:28:43Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-0vw","title":"[PRO] TUI: Reactive Filtering Engine","description":"Wire selection matrix logic to dynamically filter downstream columns based on legal combinations.","status":"open","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T17:27:39Z","created_by":"Megatherium","updated_at":"2026-02-21T17:27:39Z","dependencies":[{"issue_id":"bb-0vw","depends_on_id":"bb-0ce","type":"blocks","created_at":"2026-02-21T18:47:41Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-0vw","depends_on_id":"bb-bc0","type":"blocks","created_at":"2026-02-21T18:47:41Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-12u","title":"Review: Refactor AppOptions to domain package and update dolt.NewStore","description":"Review bb-2wv for moving AppOptions to the domain package to prevent circular dependencies. Update dolt.NewStore signature to accept domain.AppOptions, enabling access to global configuration like the Debug flag within the data layer.","status":"closed","priority":2,"issue_type":"chore","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T10:32:25Z","created_by":"Megatherium","updated_at":"2026-02-22T10:50:32Z","closed_at":"2026-02-22T10:50:32Z","close_reason":"Review completed and refinements addressed in bb-98r","dependencies":[{"issue_id":"bb-12u","depends_on_id":"bb-98r","type":"blocks","created_at":"2026-02-22T11:44:34Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-1f6","title":"Review: Implement tmux launcher with dry-run and outside-tmux guard","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T08:37:50Z","created_by":"Megatherium","updated_at":"2026-02-20T08:42:33Z","closed_at":"2026-02-20T08:42:33Z","close_reason":"Review passed (9.0/10). All deliverables met: Launcher interface, CommandRunner abstraction, StatusChecker, dry-run mode, tmux guard. Comprehensive unit tests. Clean code quality."}
{"id":"bb-1t3","title":"Review: Implement TicketStore Dolt backends","description":"Review the TicketStore Dolt implementation (bb-2p9).\\n\\n## Files to Review\\n- internal/data/dolt/store.go - Main Store type\\n- internal/data/dolt/embedded.go - Embedded Dolt driver\\n- internal/data/dolt/server.go - MySQL server driver  \\n- internal/data/dolt/metadata.go - Metadata parsing\\n- internal/data/dolt/schema.go - Schema verification\\n- internal/data/dolt/*_test.go - Test coverage\\n\\n## Review Criteria\\n- Code quality and maintainability\\n- Error handling clarity\\n- Interface compliance\\n- Test coverage\\n- Documentation completeness\\n\\n## Deliverable\\nScore (0.0-10.0) and decision:\\n- Score < 8.5: Create refinement ticket listing all defects\\n- Score >= 8.5: Pass or optional minor cleanup","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T08:00:34Z","created_by":"Megatherium","updated_at":"2026-02-20T08:09:16Z","closed_at":"2026-02-20T08:09:16Z","close_reason":"Review complete. Score: 6.0/10. Critical SQL placeholder bug found (PostgreSQL style  instead of MySQL style ?). Refinement ticket bb-hdm created with all defects documented. Original task bb-2p9 is now blocked by refinement."}
{"id":"bb-2p9","title":"Implement TicketStore: Dolt embedded + MySQL server backends","description":"Implement the TicketStore interface with two backends: Dolt embedded mode (for local beads DBs) and MySQL/Dolt server mode (for remote beads instances).\n\n## Context\n- Beads stores issues in a Dolt database. Connection mode is determined by .beads/metadata.json in the target project.\n- Embedded mode uses github.com/dolthub/driver — see tmp/store_embedded.go for reference patterns (DSN format, connector usage, pool config, backoff).\n- Server mode uses standard MySQL driver (github.com/go-sql-driver/mysql) — see tmp/server-metadata.json for connection config shape.\n- The issues table schema is in tmp/schema.go. There's also a ready_issues view that filters for unblocked work.\n- This is READ-ONLY access. Blunderbuss NEVER writes to the beads DB.\n\n## Deliverables\n\n### internal/data/dolt/embedded.go\n- newEmbeddedStore(ctx, beadsDir) — opens embedded Dolt connection\n- Read .beads/metadata.json to get database name\n- DSN: file://<abs_path_to_.beads/dolt>?database=<db_name> (read-only, no committer needed)\n- Connection pool: MaxOpenConns=1, MaxIdleConns=1 (embedded is single-connection)\n- Implements TicketStore.ListTickets using ready_issues view\n\n### internal/data/dolt/server.go\n- newServerStore(ctx, beadsDir) — opens MySQL connection to Dolt server\n- Read .beads/metadata.json for host, port, user, database\n- Standard MySQL DSN\n- Implements TicketStore.ListTickets using ready_issues view\n\n### internal/data/dolt/store.go\n- NewStore(ctx, beadsDir) — factory that reads metadata.json, picks embedded vs server mode\n- Shared query logic (both modes use same SQL, different *sql.DB)\n- ListTickets query: SELECT from ready_issues view, map to domain.Ticket\n- Filter support: status, issue_type, search (LIKE on title), limit\n\n### Metadata parsing\n- Parse .beads/metadata.json to determine mode (check dolt_mode or presence of server fields)\n- Current project's metadata.json: {database: dolt, backend: dolt, dolt_database: beads_bb} → embedded\n- Server example: adds dolt_mode: server, dolt_server_host, dolt_server_port, dolt_server_user\n\n### Unit tests\n- Metadata parsing (embedded detection, server detection)\n- Query building with filters\n- Use sqlmock for query tests (don't require running Dolt)\n\n### CLI integration\n- --beads-dir flag (default: .beads in current directory) to locate the beads database\n- DSN override via --dsn flag for manual connection strings\n\n## Key decisions\n- Read-only: no writes, no transactions, no locking concerns\n- Use ready_issues view for the default list (shows only unblocked, non-deferred, non-ephemeral)\n- Embedded mode requires CGO (dolthub/driver uses CGO) — document this in README\n- Fail loudly with actionable errors: DB not found, connection refused, schema mismatch\n","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T18:46:42Z","created_by":"Megatherium","updated_at":"2026-02-20T08:14:25Z","closed_at":"2026-02-20T08:14:25Z","close_reason":"Implementation complete with all review issues resolved: SQL placeholders fixed, password escaping implemented, Close() tests added","dependencies":[{"issue_id":"bb-2p9","depends_on_id":"bb-1t3","type":"blocks","created_at":"2026-02-20T09:00:41Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-2p9","depends_on_id":"bb-hdm","type":"blocks","created_at":"2026-02-20T09:09:03Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-2p9","depends_on_id":"bb-sxs","type":"blocks","created_at":"2026-02-19T19:48:47Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-2wv","title":"Refactor AppOptions to domain package and update dolt.NewStore","description":"Move AppOptions from ui package to domain package to prevent circular dependencies. Update dolt.NewStore signature to accept domain.AppOptions, enabling access to global configuration like the Debug flag within the data layer.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T10:32:09Z","created_by":"Megatherium","updated_at":"2026-02-22T10:50:42Z","closed_at":"2026-02-22T10:50:42Z","close_reason":"Refactored AppOptions to domain package and updated dolt.NewStore","dependencies":[{"issue_id":"bb-2wv","depends_on_id":"bb-12u","type":"blocks","created_at":"2026-02-22T11:44:34Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-354","title":"Review: bb-hbf Wire real TicketStore into TUI","description":"Review the TicketStore integration implementation (bb-hbf).\n\n## Files to Review\n- cmd/blunderbuss/main.go - Flag wiring, store initialization\n- internal/ui/model.go - Loading states, error handling, refresh\n- internal/ui/ticket_list.go - Empty state handling\n- internal/ui/error.go - Error view with actionable messages\n\n## Review Criteria\n- Code quality and maintainability\n- Error handling clarity and user-friendliness\n- Async loading patterns (Bubble Tea Cmd usage)\n- UI state management (loading, error, empty states)\n- Test coverage where applicable\n\n## Deliverable\nScore (0.0-10.0) and decision:\n- Score < 8.5: Create refinement ticket listing all defects\n- Score >= 8.5: Pass or optional minor cleanup","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T19:40:29Z","created_by":"Megatherium","updated_at":"2026-02-21T08:53:24Z","closed_at":"2026-02-21T08:53:24Z","close_reason":"Review completed. Refinement bb-8pd implemented, tested, and pushed."}
{"id":"bb-3dd","title":"Review: TUI Sidebar styling logic deduplication","description":"Review the refactoring work done in bb-3w0 for sidebar styling logic deduplication.\n\nChanges to review:\n1. Added tree prefix constants (prefixExpanded, prefixCollapsed, prefixLeaf, indentString)\n2. Added shouldApplyStyle() helper method as single source of truth for cursor/focus checks\n3. Refactored renderProjectName(), renderWorktreeName(), renderHarnessName() to use the helper\n4. Deduplicated bullet indicator (●) logic in renderWorktreeName()\n\nFiles changed:\n- internal/ui/sidebar.go\n\nAcceptance criteria verification:\n- No duplicate 'if !isCursor || !m.focused' checks ✓\n- Single source of truth for cursor/focus styling logic ✓\n- All existing tests continue to pass ✓\n- Visual output unchanged ✓\n\nPlease review for code quality, maintainability, and any potential edge cases.","status":"closed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-23T07:22:01Z","created_by":"Megatherium","updated_at":"2026-02-23T08:07:11Z","closed_at":"2026-02-23T08:07:11Z","close_reason":"Review passed. Added godoc comment explaining 4-char alignment for tree constants. All tests passing."}
{"id":"bb-3nf","title":"[PRO] Core: Project Rename & Config Restructure","description":"Rename project object 'blunderbuss' to 'blunderbust'. Default config ~/.config/blunderbust/config.yaml. Update scripts/docs.","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T17:27:36Z","created_by":"Megatherium","updated_at":"2026-02-22T07:05:50Z","closed_at":"2026-02-22T07:05:50Z","close_reason":"Project rename complete: blunderbuss→blunderbust, import paths updated, cache/config paths changed, docs updated, all tests pass","dependencies":[{"issue_id":"bb-3nf","depends_on_id":"bb-yh7","type":"blocks","created_at":"2026-02-22T08:53:10Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-3va","title":"Review: Fix Dolt server connection default port","description":"Review the fix for bb-li6: Changed default Dolt server port from 3306 to 3307.\n\n## Changes to review:\n1. internal/data/dolt/server.go:81 - Changed default port from 3306 to 3307\n2. internal/data/dolt/store_test.go:504 - Updated test expectation\n\n## Why:\nDolt sql-server defaults to port 3307, not MySQL's 3306. The hardcoded default was causing connection failures when metadata.json didn't specify a port.\n\n## Files changed:\n- internal/data/dolt/server.go\n- internal/data/dolt/store_test.go","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T10:57:03Z","created_by":"Megatherium","updated_at":"2026-02-22T11:37:18Z","closed_at":"2026-02-22T11:37:18Z","close_reason":"Review passed","dependencies":[{"issue_id":"bb-3va","depends_on_id":"bb-li6","type":"discovered-from","created_at":"2026-02-22T11:57:23Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-3w0","title":"Refactor: TUI Sidebar styling logic deduplication","description":"Code smell identified during review of bb-lh7 (bb-zij):\n\nThe sidebar rendering has repetitive styling logic across multiple helper methods:\n\nCurrent pattern (repeated 5 times):\n\n\nRefactoring goals:\n1. Extract common styling decision logic into a reusable helper\n2. Consider using a style selector pattern or map-based style resolution\n3. Reduce cognitive load by centralizing the 'isCursor && focused' check\n4. Maintain current behavior while improving maintainability\n\nPotential approach:\n\n\nOr consider consolidating the render methods into a single method with a type-based style lookup.\n\nAcceptance criteria:\n- No duplicate 'if !isCursor || !m.focused' checks\n- Single source of truth for cursor/focus styling logic\n- All existing tests continue to pass\n- Visual output unchanged","status":"closed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T22:27:38Z","created_by":"Megatherium","updated_at":"2026-02-23T08:02:08Z","closed_at":"2026-02-23T08:02:08Z","close_reason":"Refactoring completed and reviewed successfully. All acceptance criteria met."}
{"id":"bb-3xb","title":"Review: Optimize build pipeline (FIPS + ldflags)","description":"Review the Makefile changes for GOFIPS140=off additions.\\n\\nChanges to review:\\n- Added GOFIPS140=off to build, debug, and install targets\\n- Verified -s -w flags were already present\\n- Tested alternative build tags (no significant impact)\\n\\nNote: Investigation revealed the 32MB FIPS buffer is in BSS (runtime memory), not binary file, so expected size reduction was not achieved.\\n\\nPlease review for:\\n1. Correctness of GOFIPS140=off placement\\n2. Code style and consistency\\n3. Any potential issues","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T19:01:03Z","created_by":"Megatherium","updated_at":"2026-02-22T19:35:29Z","closed_at":"2026-02-22T19:35:29Z","close_reason":"Review completed for bb-pd5. Makefile changes approved - GOFIPS140=off correctly added to build, debug, and install targets."}
{"id":"bb-3zg","title":"[FEATURE] One-shot tracer implementation","description":"### System Overview & Design Spec\nTo get from a Dolt database to a running tmux window, we need a clean pipeline. Here is the high-level architecture:\n#### 1. The Data Layer (Beads/Dolt)\nWe need to interface with the Dolt database used by Beads. Since Dolt is MySQL-compatible, we will use a standard Go SQL driver to query for:\n* **Tickets/Issues:** The active tasks you want to work on.\n* **Metadata:** Contextual info that might need to be passed to the harness (branch names, repo paths).\n#### 2. The Model Layer (Configuration)\nSince harnesses (OpenCode, Claude, etc.) change frequently, we should define them in a `config.yaml` or `config.json`. This maps a \"Harness\" to a specific shell command template.\nThe TicketID will be used in a work prompt,\n* **Attributes:** Name, Command Template (e.g., `opencode --model {{.Model}} --agent {{.Agent}}`), and supported Models/Agents.\n#### 3. The UI Layer (Bubble Tea)\nA multi-step TUI flow:\n* **List View:** Select a Ticket (filtered from Beads).\n* **Selection View:** Select Harness -> Select Model -> Select Agent (if applicable).\n* **Execution:** Confirm and Launch.\n#### 4. The Execution Layer (tmux/OS)\nThe Go binary will not just \"run\" a command; it will spawn a `tmux` window or pane.\n* **Command:** `tmux new-window -n \"Ticket-123\" \"harness_cmd_here\"`\n* **Tracking:** We can capture the window ID or PID if we want to monitor the process status later.\n---\n### Implementation Plan: Phase 1\nWe should start with a \"Minimum Viable Launcher\" that reads from the Dolt DB and triggers a tmux window.\n## Feature Description\nKeep this code nicely maintainable and extensible. Else it will be trashed even if it runs.","status":"closed","priority":2,"issue_type":"epic","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T16:48:33Z","created_by":"Megatherium","updated_at":"2026-02-19T20:08:13Z","closed_at":"2026-02-19T20:08:13Z","close_reason":"MVP design complete (so far). Let the games begin"}
{"id":"bb-439","title":"Investigate confirm view's rendered prompt display behavior","description":"The confirm view (internal/ui/confirm.go) currently shows the rendered prompt by calling RenderSelection, which re-renders the prompt template. This may be problematic if the prompt is meant to be file-based (using @ syntax to reference external files). Need to verify: 1) Does the current implementation correctly handle file-based prompts? 2) Should the confirm view be using the already-rendered prompt from the LaunchSpec instead of re-rendering? 3) Is there an oversight in how prompts are being handled?","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T13:20:59Z","created_by":"Megatherium","updated_at":"2026-02-21T14:50:08Z","closed_at":"2026-02-21T14:50:08Z","close_reason":"Root cause found and fixed: loadTemplateValue was incorrectly joining absolute paths with configDir. Fixed by checking filepath.IsAbs() before joining. Added test for absolute path handling."}
{"id":"bb-4o9","title":"Review: Make rendered prompt available as {{.Prompt}} in command templates","description":"Feature implementation that adds {{.Prompt}} variable to command templates.\\n\\nChanges:\\n- Added Prompt field to TemplateContext struct\\n- Modified RenderSelection to render prompt first, then command\\n- Added comprehensive tests for new functionality\\n- Updated README.md documentation\\n\\nAll tests pass, backward compatibility verified.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T14:37:42Z","created_by":"Megatherium","updated_at":"2026-02-21T15:25:43Z","closed_at":"2026-02-21T15:25:43Z","close_reason":"Self-review completed: Implementation is clean, well-tested, and documented. Bug fix (absolute path handling) added. All tests pass."}
{"id":"bb-58l","title":"Refinement: Sidebar integration workDir inconsistency and duplication","description":"Code review findings from sidebar restoration (c39a14f re-applied to HEAD):\n\n1. **WorkDir mismatch (MEDIUM)**: confirmView receives raw m.selectedWorktree (may be empty), but launchCmd falls back to project root when empty. User sees no WorkDir in confirm screen but launch uses a fallback. Fix: resolve workDir once and use consistently.\n\n2. **Repo root resolution duplication (LOW)**: beadsDir-to-project-root logic duplicated in discoverWorktreesCmd and launchCmd. Extract to a helper.\n\n3. **Sidebar encapsulation leak (MEDIUM)**: handleEnterKey in UIModel manually calls sidebar.State().ToggleExpand(), duplicating SidebarModel's own handleSelect logic. Delegate to sidebar.Update instead.\n\nRelated: park_refactor branch has a partial dedup refactor already.","status":"open","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-23T09:12:28Z","created_by":"Megatherium","updated_at":"2026-02-23T09:12:39Z"}
{"id":"bb-5zx","title":"[CHORE] Add helper function with VHS","description":"VHS is a tool by charmbracelet (github.com/charmbracelet/vhs) that generates movies from executed shell sessions. \nAt least those model that can ingest images can profit from the TUI being saved as an image in its rendered form.\n## Task Description\nFigure out a way (do we need a script, will a hint in the ./.beads/PRIME.md do, do we need an MCP) that allows models to quickly check how the app currently looks.\n`vhs` can output frames as images if you give it a directory (there was some quirk about it having to be relative or something)\nYou could also try using vhs's API since it's written in GO\n## Why is this needed?\nI believe that I'm underutilizing the design capabilities and also taste of Gemini and other multimodal models\n## Acceptance Criteria\n- [ ] Some kind of enhancement allows models to easily \"look\" at the TUI ","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T12:43:15Z","created_by":"Megatherium","updated_at":"2026-02-22T15:15:49Z","closed_at":"2026-02-22T15:15:49Z","close_reason":"Feature implemented and verified.","dependencies":[{"issue_id":"bb-5zx","depends_on_id":"bb-91m","type":"blocks","created_at":"2026-02-22T14:40:35Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-5zx","depends_on_id":"bb-av5","type":"blocks","created_at":"2026-02-22T16:08:01Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-64l","title":"Refinement: Model Discovery Race Condition & HTTP Timeout","description":"Critical issues found in bb-0ce review (bb-0lc):\n\n**Critical (Must Fix):**\n1. **Race Condition** - Registry.Providers map accessed concurrently without sync.RWMutex\n2. **HTTP Timeout Missing** - Refresh() uses naked http.Get(), can hang indefinitely\n\n**High Priority:**\n3. **Cache Corruption** - No handling for malformed/corrupted cache files\n4. **Silent UI Failures** - Load() errors silently swallowed in UI Init()\n\n**Medium Priority:**  \n5. **Test Isolation** - Tests modify global os.Setenv without proper cleanup/parallel safety\n6. **Missing Error Tests** - No HTTP error path, cache read error, or JSON decode error tests\n\n**Low Priority:**\n7. **Context Support** - Refresh() doesn't accept context.Context for cancellation\n8. **Ignored Error** - os.UserHomeDir() error ignored on line 36\n\n**Code Quality:**\n9. **Commit Scope Creep** - Launcher changes unrelated to model discovery\n10. **Missing Validation** - No JSON structure validation beyond basic decode\n11. **Magic Strings** - \"discover:active\" pattern scattered in code\n12. **Documentation** - Provider struct fields need better documentation\n\n**Acceptance Criteria:**\n- go test -race ./internal/discovery/... passes\n- HTTP client has 30s timeout with retry logic\n- Cache file corruption returns error (not panic)\n- All error paths have test coverage\n- Context.Context supported throughout","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T21:28:36Z","created_by":"Megatherium","updated_at":"2026-02-21T21:38:58Z","closed_at":"2026-02-21T21:38:58Z","close_reason":"Fixed all refinement issues: implemented sync.RWMutex, HTTP timeout with retry, cache corruption recovery, test isolation, context support, and cleaned up magic strings."}
{"id":"bb-69n","title":"Review: Add file-based template loading with @./templates/ syntax","description":"Review implementation of file-based template loading feature (ticket bb-9by)\n\nImplementation adds:\n- @./ syntax to load templates from external files\n- loadTemplateValue() function for file loading\n- Path resolution relative to config file\n- Comprehensive test coverage\n- Updated documentation in config.example.yaml\n\nKey changes:\n- internal/config/yaml.go: Load, convertAndValidate, convertHarness modified\n- internal/config/yaml_test.go: 5 new test functions added\n- config.example.yaml: Documentation and example added","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T10:36:36Z","created_by":"Megatherium","updated_at":"2026-02-21T10:42:33Z","closed_at":"2026-02-21T10:42:33Z","close_reason":"Review passed - implementation approved"}
{"id":"bb-6ay","title":"Refinement: TUI Sidebar minor defects","description":"Minor defects found during review of bb-lh7 (bb-zij):\n\n1. Missing doc comments on exported functions:\n   - All public methods on SidebarModel need godoc comments\n   - Key bindings struct and exported types need documentation\n\n2. IsRunning field is set but never used:\n   - SidebarNode.IsRunning is defined but never referenced in View() or styling\n   - Either remove unused field or implement visual indicator for running worktrees\n\n3. Missing test coverage for handleSelect():\n   - No tests for selecting different node types (project, worktree, harness)\n   - Need tests for SelectWorktreeCmd emission\n   - Need tests for ToggleExpand behavior on project nodes\n\n4. Potential nil pointer issues:\n   - renderWorktreeName checks node.WorktreeInfo != nil but other methods don't\n   - Add defensive checks for consistency\n\nAcceptance criteria:\n- Add godoc comments to all exported functions\n- Either implement IsRunning indicator or remove the field\n- Add unit tests for handleSelect() scenarios\n- Ensure consistent nil checks","status":"closed","priority":2,"issue_type":"bug","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T22:27:34Z","created_by":"Megatherium","updated_at":"2026-02-22T22:45:14Z","closed_at":"2026-02-22T22:45:14Z","close_reason":"Fixed all 4 defects: added godoc, implemented IsRunning indicator, added handleSelect tests, added nil checks"}
{"id":"bb-6gp","title":"Epic: Blunderbust Proto-Mk1 (The Arcade Dashboard)","description":"Transition from Mk0 wizard to concurrent Command Center. Features grid selection, dynamic filtering, ghost tail output, and model discovery context.","status":"open","priority":1,"issue_type":"epic","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T17:27:36Z","created_by":"Megatherium","updated_at":"2026-02-21T17:27:36Z"}
{"id":"bb-7ah","title":"Implement real tmux Launcher","description":"Replace the fake Launcher with the real internal/exec/tmux Launcher.","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T18:21:21Z","created_by":"Megatherium","updated_at":"2026-02-20T19:45:32Z","closed_at":"2026-02-20T19:45:32Z","close_reason":"Closed","dependencies":[{"issue_id":"bb-7ah","depends_on_id":"bb-ooj","type":"blocks","created_at":"2026-02-20T20:27:51Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-7cv","title":"Review: Wire config loader + tmux launcher into TUI (bb-nds)","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T09:38:19Z","created_by":"Megatherium","updated_at":"2026-02-21T09:47:44Z","closed_at":"2026-02-21T09:47:44Z","close_reason":"Review passed - score 8.5/10. All functionality implemented correctly. Minor lint issues tracked in bb-btg."}
{"id":"bb-7ov","title":"Review: Config YAML loader with validation and template rendering","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T21:51:16Z","created_by":"Megatherium","updated_at":"2026-02-19T21:59:15Z","closed_at":"2026-02-19T21:59:15Z","close_reason":"Review passed (8.8/10). One minor gap: no duplicate harness name validation. Not blocking - code is clean, well-tested (98.2% coverage), staticcheck clean.","dependencies":[{"issue_id":"bb-7ov","depends_on_id":"bb-hvk","type":"blocks","created_at":"2026-02-19T22:51:40Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-7rx","title":"[BUG] UI flow broken","description":"1. When starting the app the tickets are shown but no key does anything apart from q and enter. j/k, up/down, / - nothing moves anything\n2. When pressing enter we immediately go to the ready to launch screen with no harness selected.\n  - Skipping the harness selection is of course wrong\n  - Entering the ready screen without a harness selected is an illegal state transition\n  - Esc then brings us to the harness selection. Still no up/down but enter gets us through all menus and launches the harness\n## Expected Behavior\nup/down and everything shown at the bottom keyboard hints works","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T10:19:23Z","created_by":"Megatherium","updated_at":"2026-02-21T10:37:06Z","closed_at":"2026-02-21T10:37:06Z","close_reason":"Fix reviewed and approved (ticket bb-bz9). Keyboard navigation and harness selection flow now work correctly.","dependencies":[{"issue_id":"bb-7rx","depends_on_id":"bb-bz9","type":"blocks","created_at":"2026-02-21T11:30:32Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-81z","title":"Polish: README, example config, troubleshooting, exit codes","description":"Make the MVP usable by someone who wasn't involved in building it.\n\n## Deliverables\n\n### config.example.yaml\n- Working example with 3+ real harnesses (opencode, amp, claude-code or similar)\n- Commented with explanation of each field\n- Shows command_template and prompt_template patterns\n\n### README.md (full rewrite)\n- Project description: what blunderbuss is (beads-integrated TUI launcher for AI coding harnesses)\n- Prerequisites: Go, tmux, beads project with Dolt DB\n- Build instructions\n- Usage: basic flow, flags reference\n- Config file format and location\n- DSN/connection modes (embedded vs server)\n- Running inside tmux (requirement)\n- Dry-run mode\n- Troubleshooting: common errors and fixes\n- Future: mention quickdraw/blitzdraw/x-draw as planned features\n\n### CLI polish\n- Exit codes: 0=success, 1=general error, 2=config error, 3=no tmux\n- --help output is clean and informative\n- --version flag (embed via ldflags or just hardcode v0.1.0)\n\n### AGENTS.md update\n- Add blunderbuss-specific build/run/test instructions for agents working on this codebase\n\n## Key decisions\n- README is the onboarding doc — it should be complete enough to go from clone to launch\n- Example config uses real harness names people will actually use","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T18:48:22Z","created_by":"Megatherium","updated_at":"2026-02-21T11:49:01Z","closed_at":"2026-02-21T11:49:01Z","close_reason":"Complete: All deliverables implemented and documented. Refinement bb-bbf also resolved.","dependencies":[{"issue_id":"bb-81z","depends_on_id":"bb-bbf","type":"blocks","created_at":"2026-02-21T12:43:01Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-81z","depends_on_id":"bb-dzk","type":"blocks","created_at":"2026-02-21T12:38:13Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-81z","depends_on_id":"bb-nds","type":"blocks","created_at":"2026-02-19T19:48:48Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-8p8","title":"Review: Refactor model.go","description":"Review the decomposition of model.go (776 lines) into 6 focused files. Check for: code quality, proper imports, clear cohesion, no regressions (tests pass).","status":"open","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-23T08:30:24Z","created_by":"Megatherium","updated_at":"2026-02-23T08:30:55Z","dependencies":[{"issue_id":"bb-8p8","depends_on_id":"bb-aln","type":"blocks","created_at":"2026-02-23T09:30:51Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-8pd","title":"Refinement: Fix TicketStore integration issues","description":"Critical and significant issues found in bb-hbf TicketStore integration review (score 7.5/10).\n\n## Defects to Fix\n\n### Critical\n1. **Resource leak** (cmd/blunderbuss/main.go:123-134)\n   - Store is never closed. No defer store.Close()\n   - Will leak database connections\n\n### Significant\n2. **Blocking initialization** (cmd/blunderbuss/main.go:123-133)\n   - Store creation is synchronous before TUI starts\n   - If connection fails, user sees stderr only, not TUI error screen\n   - Spec required graceful error handling through UI (errorView)\n   - Should create store async or defer errors to TUI\n\n3. **Unused flag** (cmd/blunderbuss/main.go:63)\n   - `--dsn` flag defined but never used in store creation\n   - Either wire it into dolt.NewStore or remove it\n\n### Minor (Optional)\n4. **No test coverage**\n   - No tests for store initialization\n   - No tests for async loading patterns\n   - No tests for error state transitions\n   - No tests for empty state handling\n\n## Expected Behavior\n- Store is properly closed on exit\n- Connection errors display in TUI error screen (errorView)\n- All flags are functional or removed","status":"closed","priority":1,"issue_type":"bug","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T19:46:02Z","created_by":"Megatherium","updated_at":"2026-02-20T19:49:53Z","closed_at":"2026-02-20T19:49:53Z","close_reason":"All defects fixed:\\n1. Resource leak - Added defer app.Close() in main.go and Close() method in app.go\\n2. Blocking initialization - Moved store creation to async Init() in TUI model, errors now display in errorView\\n3. Unused --dsn flag - Removed from flags\\n4. All tests pass, code formatted and vetted"}
{"id":"bb-91m","title":"Review: Add helper function with VHS","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T13:40:21Z","created_by":"Megatherium","updated_at":"2026-02-22T15:15:48Z","closed_at":"2026-02-22T15:15:48Z","close_reason":"Review passed. Verified screenshot generation works with VHS and ttyd."}
{"id":"bb-92q","title":"Refinement: TUI Base Layout code quality","description":"Issues found in bb-va5 review (score 8.0/10):\n\n**Medium Priority:**\n1. Value receiver mutation in View() (model.go:481-492) - View() has value receiver but calls SetEnabled() on keys. Refactor to use updateKeyBindings() method called from Update() instead of View().\n\n2. Magic color numbers (model.go:496-497) - Add named constants for footer colors (e.g., footerBgColor, footerFgColor).\n\n3. No test coverage - Add basic tests for KeyMap struct and View rendering.\n\n**Low Priority:**\n4. Hardcoded footer height (model.go:300) - Consider calculating actual footer height or using a constant with explanation.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T22:52:01Z","created_by":"Megatherium","updated_at":"2026-02-21T22:56:11Z","closed_at":"2026-02-21T22:56:11Z","close_reason":"Fixed: keybinding logic moved to Update(), color constants added, tests added"}
{"id":"bb-98r","title":"Refinement: Fix debug logging, formatting, and documentation in dolt.NewStore refactor","description":"Fix issues found in review bb-12u of bb-2wv:\n\n1. Debug Logging Inconsistency (Medium): Replace direct fmt.Fprintf calls with proper debug flag checks. Currently debug output is unconditionally written to stderr. Should only print when opts.Debug is true.\n\n2. Code Formatting (Minor): ListTickets signature has unnecessary multi-line formatting that reduces readability. Restore to single-line format.\n\n3. Documentation Inconsistency (Minor): internal/data/dolt/doc.go changed error handling comment, inconsistent with other examples. Restore to return err for consistency.\n\nAll issues are in the dolt package refactor work.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T10:44:20Z","created_by":"Megatherium","updated_at":"2026-02-22T10:50:12Z","closed_at":"2026-02-22T10:50:12Z","close_reason":"Fixed debug logging, code formatting, and documentation"}
{"id":"bb-9by","title":"Add file-based template loading with @./templates/ syntax","description":"Allow command_template and prompt_template to reference external files instead of inline strings.\\n\\n## Problem\\nCurrently, template values are inline strings in the YAML config. This is limiting for:\\n- Long or complex prompts that need to be externalized\\n- Reusable templates across multiple harnesses\\n- Better separation of concerns between config and templates\\n\\n## Proposed Solution\\n- Support '@./templates/...' syntax in command_template and prompt_template fields\\n- When '@' prefix is detected, read file content from the path after the '@'\\n- Strip the '@' prefix and load the file content\\n- If file doesn't exist or can't be read, return an actionable error\\n\\n## Example Usage\\n\\n\\n\\nOr if you want to keep the string format:\\n\\n\\n## Implementation Notes\\n- Parse template values in the YAML loader or config structure\\n- Load file content during config initialization or harness selection\\n- Handle file paths relative to the config file location\\n- Error messages should be clear: 'Failed to load template file: @./templates/claude_prompt.txt (file not found)'\\n\\n## Testing\\n- Add tests for valid file references\\n- Add tests for missing files\\n- Add tests for malformed template syntax","status":"closed","priority":2,"issue_type":"feature","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T10:27:38Z","created_by":"Megatherium","updated_at":"2026-02-21T10:42:33Z","closed_at":"2026-02-21T10:42:33Z","close_reason":"Closed","dependencies":[{"issue_id":"bb-9by","depends_on_id":"bb-69n","type":"blocks","created_at":"2026-02-21T11:36:41Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-9x2","title":"Review: Arcade Select Layout & Navigation Base","description":"Review the structural implementation of bb-bc0 (Arcade Select Matrix in model.go). Focus on: 4-column lipgloss grid, Keyboard navigation (Left/Right), dynamic width reallocation & UI state (ViewState/FocusColumn), Sidebar toggling ('p'), and disabled item counts.\nCAUTION: so mongrel already committed internal/ui/model.go so you'll to work with the diff or however you see fit to see the changes.\n\n","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T11:44:09Z","created_by":"Megatherium","updated_at":"2026-02-22T17:02:18Z","closed_at":"2026-02-22T17:02:18Z","close_reason":"Approved and merged"}
{"id":"bb-alm","title":"Refinement: Arcade Select Visual Polish","description":"Fix visual polish issues identified in review bb-nvr:\n\nMUST FIX:\n1. Theme-aware color system:\n   - Extract colors to semantic constants (ActiveBorder, InactiveBorder, FooterBg, FooterFg)\n   - Add fallback for 256-color terminals\n   - Consider adding theme support or using lipgloss.AdaptiveColor\n\n2. Fix modal background:\n   - Add dimming/opacity layer behind modal when open\n   - Modal should overlay dimmed background for better focus\n\nSHOULD FIX:\n3. Separate border/content dimming:\n   - Inactive column borders should remain visible (not faint)\n   - Only content should be faint when inactive\n   - Requires rendering border separately from content\n\n4. Modal responsive sizing:\n   - Add minimum width check (e.g., 40 chars minimum)\n   - Handle very narrow terminals gracefully\n   - Consider scrollable modal content for long ticket details\n\n5. Document magic numbers:\n   - Add comments for SetHeight(3) explaining the 2-line description\n   - Extract filterHeight = 3 to named constant with explanation\n\nNICE TO HAVE:\n6. Color contrast validation:\n   - Add comments showing WCAG contrast ratios for chosen colors\n   - Or provide theme customization options\n\nAcceptance: MUST and SHOULD items complete, modal looks polished with proper focus.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T16:29:58Z","created_by":"Megatherium","updated_at":"2026-02-22T16:34:31Z","closed_at":"2026-02-22T16:34:31Z","close_reason":"Fixed all MUST and SHOULD criteria (Semantic colors, modal dimming, border Faint inheritance fixed, responsive modal). Note: used AdaptiveColor but retained user's explicit  and  footer choice per prior instruction."}
{"id":"bb-aln","title":"[CHORE] Refactor model.go","description":"internal/ui/model.go is over 700 lines which is bulging into inconvenient size territory\n## Task Description\n2 pass:\n1. decompose the file because smaller files are easier to handle\n2. check all generated files for other weaknesses that can be eliminated by fixing and refactoring\n## Why is this needed?\ncode health, duh\n## Scope\ninternal/ui/model.go and everything that touches it if there are gains to made\n## Acceptance Criteria\n- [ ] internal/ui/model.go is decomposed into smaller files\n- [ ] the smaller files are checked and their code quality (potentially) improved","status":"in_progress","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-23T08:15:00Z","created_by":"Megatherium","updated_at":"2026-02-23T08:16:56Z"}
{"id":"bb-av5","title":"Refinement: Fix VHS script binary reference","description":"The `scripts/screenshot.tape` script references `./bdb`, but the `Makefile` builds `./blunderbust`. This causes the screenshot generation to use a potentially stale or missing binary. Also, `AGENTS.md` refers to `bdb` as the primary binary, creating confusion.\n\n**Action Items:**\n1. Update `scripts/screenshot.tape` to use `./blunderbust`.\n2. Ensure `make screenshot` works correctly after the change.","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T15:07:54Z","created_by":"Megatherium","updated_at":"2026-02-22T15:12:16Z","closed_at":"2026-02-22T15:12:16Z","close_reason":"Created in error, binary name is correct"}
{"id":"bb-azk","title":"Review: Refinement of Model Discovery","description":"Review the fixes implemented in bb-64l for race conditions and network resilience","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T21:39:35Z","created_by":"Megatherium","updated_at":"2026-02-21T22:06:27Z","closed_at":"2026-02-21T22:06:27Z","close_reason":"Review completed and feedback implemented"}
{"id":"bb-baw","title":"[BUG] Harness is crammed","description":"I've only tried it with opencode so far but will assume it's universal. Opencode launches but then it only uses the topleft quadrant of the whole space. Splitting the window left to right and then closing the new pane wipes out the part of the harness it overlays and that aren't refreshed. Weird. Never seen this before. \n## Expected Behavior\nHarness uses the whole window space","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T15:24:42Z","created_by":"Megatherium","updated_at":"2026-02-21T16:06:21Z","closed_at":"2026-02-21T16:06:21Z","close_reason":"Closed"}
{"id":"bb-bbf","title":"Refinement: Binary name consistency in README","description":"Fix binary name inconsistency in README.md:\\n\\n- Line 50 says binary is built as `bdb` (from Makefile)\\n- Line 57 manual build command uses `-o blunderbuss`\\n- All other commands reference `./blunderbuss`\\n\\nRecommendation: Either change line 50 to say `blunderbuss` OR update all examples to use `./bdb` to match Makefile.\\n\\nOriginal ticket: bb-81z","status":"closed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T11:42:37Z","created_by":"Megatherium","updated_at":"2026-02-21T11:48:23Z","closed_at":"2026-02-21T11:48:23Z","close_reason":"Fixed: Binary name in Makefile changed from 'bdb' to 'blunderbuss' for consistency with documentation examples."}
{"id":"bb-bc0","title":"TUI: Selection Matrix Component (The Arcade Select)","description":"4-column flexbox grid (Tickets, Harness, Model, Agent) with interactive filters at the top.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T17:27:38Z","created_by":"Megatherium","updated_at":"2026-02-22T17:02:18Z","closed_at":"2026-02-22T17:02:18Z","close_reason":"Feature complete with layout and visual polish.","dependencies":[{"issue_id":"bb-bc0","depends_on_id":"bb-9x2","type":"blocks","created_at":"2026-02-22T12:44:26Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-bc0","depends_on_id":"bb-alm","type":"blocks","created_at":"2026-02-22T17:30:03Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-bc0","depends_on_id":"bb-cky","type":"blocks","created_at":"2026-02-22T16:41:23Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-bc0","depends_on_id":"bb-nvr","type":"blocks","created_at":"2026-02-22T13:31:36Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-bc0","depends_on_id":"bb-va5","type":"blocks","created_at":"2026-02-21T18:47:40Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-bcb","title":"Refinement: Remove unused code from tmux launcher","description":"- Remove unused statusChecker field from Launcher struct (launcher.go:22)\n- Remove orphaned internal/exec/fake/launcher.go or document its purpose\n- These are minor code hygiene issues found in review of bb-7ah","status":"closed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T19:41:20Z","created_by":"Megatherium","updated_at":"2026-02-20T19:45:20Z","closed_at":"2026-02-20T19:45:20Z","close_reason":"Closed"}
{"id":"bb-btg","title":"Refinement: Resolve lint issues in UI layer (bb-nds)","description":"Fix lint issues found during review of bb-nds:\n- gocyclo: UIModel.Update has complexity 18 (threshold 15) - extract message type handlers\n- gofmt: 3 files need formatting (app.go, confirm.go, model.go)\nRun make lint to verify fixes.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T09:47:38Z","created_by":"Megatherium","updated_at":"2026-02-21T09:49:41Z","closed_at":"2026-02-21T09:49:41Z","close_reason":"All lint issues fixed (complexity reduced from 18 to 9, gofmt applied). MVP complete."}
{"id":"bb-bz9","title":"Review: UI flow broken","notes":"Review the fix for bb-7rx: keyboard navigation and harness selection flow","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T10:30:23Z","created_by":"Megatherium","updated_at":"2026-02-21T10:37:06Z","closed_at":"2026-02-21T10:37:06Z","close_reason":"Review passed with score 9.0/10. Fix correctly addresses both reported bugs: keyboard navigation now works (unhandled keys fall through to list views), and enter no longer skips harness selection. Code passes linting and builds successfully."}
{"id":"bb-cj8","title":"TUI: Visual Polish & Quick-Draw Flows","description":"Add Arcade Flair lock-in glow and specialized launch modes (Quick-draw, X-Draw).","status":"open","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T17:27:40Z","created_by":"Megatherium","updated_at":"2026-02-21T17:27:40Z","dependencies":[{"issue_id":"bb-cj8","depends_on_id":"bb-0vw","type":"blocks","created_at":"2026-02-21T18:47:42Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-cky","title":"Refinement: Arcade Select Layout Base","description":"Fix issues identified in review bb-9x2:\n\nMUST FIX:\n1. Add disabled item counts to list displays (ticket criteria requirement)\n2. Create comprehensive tests for model.go:\n   - Test Update method with all message types\n   - Test handleKeyMsg navigation logic\n   - Test width calculations in updateSizes()\n   - Test state transitions\n   - Test focus movement bounds\n\nSHOULD FIX:\n3. Extract magic numbers to constants:\n   - filterHeight, gap sizes, border colors\n   - Create Color constants (activeBorderColor, inactiveBorderColor)\n4. Standardize key handling to use keys.go bindings consistently\n5. Refactor updateSizes() to reduce duplication between sidebar modes\n6. Add minimum window size validation\n\nNICE TO HAVE:\n7. Replace placeholder sidebar content with actual implementation or remove\n8. Document width allocation algorithm in comments\n\nAcceptance: All MUST and SHOULD items complete, tests passing.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T15:41:17Z","created_by":"Megatherium","updated_at":"2026-02-22T16:09:28Z","closed_at":"2026-02-22T16:09:28Z","close_reason":"Fixed all MUST and SHOULD criteria (added tests, constants, min window sizes, standardized keys, restored status bars, refactored updateSizes)."}
{"id":"bb-d4e","title":"Implement real TicketStore","description":"Replace the fake TicketStore in the UI with the real Dolt-based database.","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T18:21:18Z","created_by":"Megatherium","updated_at":"2026-02-20T19:31:49Z","closed_at":"2026-02-20T19:31:49Z","close_reason":"Redundant - TicketStore already implemented in bb-2p9 (closed). Remaining UI integration work tracked in bb-hbf."}
{"id":"bb-d5b","title":"Review: Bubble Tea TUI Skeleton MVP","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T16:10:49Z","created_by":"Megatherium","updated_at":"2026-02-20T18:34:09Z","closed_at":"2026-02-20T18:34:09Z","close_reason":"Review complete. Score: 7.5/10. Refinement ticket bb-hey created with 2 MUST FIX and 3 SHOULD FIX issues."}
{"id":"bb-du8","title":"Review: bb-3nf Project Rename","description":"Review the project rename from blunderbuss to blunderbust.\n\n## Files to Review\n- go.mod - Module path change\n- All internal/*/*.go files - Import path updates (35 files)\n- internal/discovery/models.go - Cache directory path\n- internal/data/dolt/embedded.go - Dolt commit metadata\n- internal/exec/tmux/launcher.go - Error messages\n- internal/domain/types.go, doc.go - Package documentation\n- README.md, AGENTS.md - User documentation\n- .gitignore - Binary names\n\n## Review Criteria\n- All import paths correctly updated to github.com/megatherium/blunderbust\n- No remaining 'blunderbuss' references in code\n- Cache directory correctly set to ~/.cache/blunderbust\n- Binary name remains 'bdb' as specified\n- Documentation fully updated\n- All tests pass\n\n## Deliverable\nScore (0.0-10.0) and decision:\n- Score < 8.5: Create refinement ticket listing all defects\n- Score >= 8.5: Pass or optional minor cleanup","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T07:52:48Z","created_by":"Megatherium","updated_at":"2026-02-22T08:55:04Z","closed_at":"2026-02-22T08:55:04Z","dependencies":[{"issue_id":"bb-du8","depends_on_id":"bb-yh7","type":"supersedes","created_at":"2026-02-22T09:55:03Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-dzk","title":"Review: Polish: README, example config, troubleshooting, exit codes","description":"Review ticket bb-81z (Polish: README, example config, troubleshooting, exit codes) for quality, completeness, and adherence to documentation standards.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T11:38:04Z","created_by":"Megatherium","updated_at":"2026-02-21T11:48:23Z","closed_at":"2026-02-21T11:48:23Z","close_reason":"Review complete: Score 8.5/10. All deliverables present, minor inconsistency found and fixed in bb-bbf."}
{"id":"bb-e5k","title":"Review: Fix harness window size (bb-baw)","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T15:46:20Z","created_by":"Megatherium","updated_at":"2026-02-21T16:06:08Z","closed_at":"2026-02-21T16:06:08Z","close_reason":"Review passed: score 9.5/10. Implementation correctly unsets LINES/COLUMNS to fix harness window sizing issue."}
{"id":"bb-ec1","title":"Bubble Tea TUI skeleton with multi-step navigation (fake data)","description":"Create the Bubble Tea program with all screens and state transitions using fake/in-memory data. This proves the UI flow works before wiring real backends.\n\n## Deliverables\n\n### internal/ui/app.go\n- App struct holding Bubble Tea Model\n- Constructor: NewApp(store TicketStore, loader Loader, launcher Launcher, opts AppOptions)\n- AppOptions: DryRun bool, ConfigPath string, Debug bool\n\n### internal/ui/model.go\n- Main Model with step/screen state machine\n- Steps: TicketList → HarnessSelect → ModelSelect → AgentSelect → Confirm → Launching → Result\n- Back navigation (Esc) returns to previous step\n- Quit (q/ctrl+c) from any screen\n\n### Screen views (each in own file):\n- internal/ui/ticket_list.go — List of tickets (table or list component), enter selects\n- internal/ui/harness_select.go — List of harnesses from config, enter selects\n- internal/ui/model_select.go — List of models for selected harness, enter selects (skip if only 1)\n- internal/ui/agent_select.go — List of agents for selected harness, enter selects (skip if empty or only 1)\n- internal/ui/confirm.go — Shows full selection summary + rendered command + rendered prompt, enter launches\n- internal/ui/result.go — Shows launch result (success/failure), q quits\n\n### Smart skipping\n- If harness has only 1 model → auto-select, skip to next\n- If harness has 0 or 1 agents → auto-select/skip\n- If config has only 1 harness → auto-select, skip\n\n### Styling\n- Use lipgloss for styling (it comes with Bubble Tea ecosystem)\n- Keep it clean and minimal — this is a launcher, not a dashboard\n- Use bubbletea list component (bubbles) for selection screens\n\n### Wiring for this ticket\n- Use FakeTicketStore with 5-10 hardcoded tickets\n- Use hardcoded config with 2-3 harnesses\n- Use FakeLauncher that prints command and returns success\n- This MUST work standalone: go run cmd/blunderbuss/main.go should show the TUI with fake data\n\n## Key decisions\n- UI imports ONLY interfaces from internal/data, internal/config, internal/exec — never concrete implementations\n- State machine is explicit (enum/const for steps, not implicit)\n- Each screen is a sub-model with its own Update/View (Elm architecture)\n- The confirm screen is important: user sees exactly what will happen before launch","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T18:47:26Z","created_by":"Megatherium","updated_at":"2026-02-20T16:07:49Z","closed_at":"2026-02-20T16:07:49Z","close_reason":"Closed","dependencies":[{"issue_id":"bb-ec1","depends_on_id":"bb-d5b","type":"blocks","created_at":"2026-02-20T17:11:16Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-ec1","depends_on_id":"bb-sxs","type":"blocks","created_at":"2026-02-19T19:48:47Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-exv","title":"Refinement: Remove /blunderbuss from .gitignore","description":"## Defect to Fix\n\n1. **Old binary name still in .gitignore** (.gitignore:2)\n   - Line 2 has '/blunderbuss' \n   - Already has '/blunderbust' on line 43\n   - Remove line 2 to complete the rename\n\n## Why this matters\nKeeps .gitignore clean and consistent with the new project name.","status":"closed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T08:58:52Z","created_by":"Megatherium","updated_at":"2026-02-22T09:01:32Z","closed_at":"2026-02-22T09:01:32Z","close_reason":"Removed /blunderbuss from .gitignore"}
{"id":"bb-fi8","title":"Implement tmux launcher with dry-run and outside-tmux guard","description":"Implement the Launcher interface that spawns tmux windows with rendered harness commands. Include dry-run mode and a guard against running outside tmux (easily removable later).\n\n## Deliverables\n\n### internal/exec/tmux/launcher.go (implements Launcher interface)\n- Launch(ctx, LaunchSpec) → LaunchResult\n- Constructs: tmux new-window -n \"<WindowName>\" \"<RenderedCommand>\"\n- WindowName convention: ticket ID (e.g. bb-3zg)\n- Captures tmux window ID from output if available\n- Returns LaunchResult with window name, ID\n\n### Dry-run mode\n- When dry-run=true, print the command that would be executed, return fake LaunchResult\n- Dry-run is passed through LaunchSpec or as a Launcher constructor option\n\n### tmux guard\n- Check TMUX env var on launcher construction\n- If not inside tmux: return clear error (\"blunderbuss must be run inside a tmux session\")\n- Design the guard as a simple check that can be removed/made optional later (e.g. a constructor option SkipTmuxCheck)\n\n### internal/exec/tmux/runner.go\n- CommandRunner interface: Run(ctx, name string, args ...string) ([]byte, error)\n- RealRunner: wraps exec.CommandContext\n- This abstraction exists purely for testability — keeps tmux out of unit tests\n\n### internal/exec/tmux/status.go (monitoring foundation)\n- TmuxWindowStatus type: Running, Dead, Unknown\n- CheckStatus(windowName string) TmuxWindowStatus — uses tmux list-windows to check if window exists\n- This is the MVP monitoring: is the window alive or not\n\n### Unit tests\n- Command construction (proper escaping, window naming)\n- Dry-run returns expected output without executing\n- Guard behavior (with/without TMUX env var)\n- Status check logic (mock tmux list-windows output)\n\n## Key decisions\n- No shell interpretation: use exec.Command(\"tmux\", \"new-window\", ...) not sh -c\n- Window names are ticket IDs (short, unique, greppable)\n- Guard is a soft architectural boundary — one bool to disable, not deep coupling\n- Status check is basic (window exists = running, doesn't = dead) — extensible later per-harness","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T18:47:02Z","created_by":"Megatherium","updated_at":"2026-02-20T08:43:31Z","closed_at":"2026-02-20T08:43:31Z","close_reason":"Implementation complete. Review passed (9.0/10). All deliverables met with comprehensive tests.","dependencies":[{"issue_id":"bb-fi8","depends_on_id":"bb-1f6","type":"blocks","created_at":"2026-02-20T09:38:00Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-fi8","depends_on_id":"bb-hvk","type":"blocks","created_at":"2026-02-19T19:48:47Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-fi8","depends_on_id":"bb-sxs","type":"blocks","created_at":"2026-02-19T19:48:47Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-fvg","title":"Review: Add validation for duplicate harness names in config","description":"Review implementation of duplicate harness name validation in YAML loader.","status":"closed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T17:17:33Z","created_by":"Megatherium","updated_at":"2026-02-21T17:21:03Z","closed_at":"2026-02-21T17:21:03Z","close_reason":"Review passed with score 9.8/10. Implementation correctly validates duplicate harness names with actionable error messages. Comprehensive test coverage included."}
{"id":"bb-gs3","title":"Core/TUI: Tmux Output Streaming (Ghost Tail)","description":"Hook tmux pipe-pane to capture active agent output and stream live to Bubble Tea viewport.","status":"completed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T17:27:39Z","created_by":"Megatherium","updated_at":1772033842.933958,"dependencies":[{"issue_id":"bb-gs3","depends_on_id":"bb-lh7","type":"blocks","created_at":"2026-02-21T18:47:42Z","created_by":"Megatherium","metadata":"{}"}],"closed_at":1772033842.93396,"close_reason":"Tmux output streaming implemented: Added OutputCapture with pipe-pane support, integrated viewport for live output display, proper cleanup on exit"}
{"id":"bb-hbf","title":"Wire real TicketStore into TUI with loading and error states","description":"Replace FakeTicketStore with the real Dolt-backed TicketStore. Add loading spinner and error handling for DB operations.\n\n## Deliverables\n\n### UI integration\n- On app start: load tickets from real TicketStore asynchronously (Bubble Tea Cmd)\n- Show loading spinner/message while querying\n- Show error screen if DB connection fails, with actionable message (check beads dir, check DSN)\n- Refresh capability (r key to reload ticket list)\n\n### Error UX\n- DB not found: \"No beads database found at <path>. Is this a beads project?\"\n- Connection refused (server mode): \"Cannot connect to Dolt server at <host>:<port>\"\n- Empty results: \"No ready tickets found\" (not an error, just info)\n\n### cmd/blunderbuss/main.go updates\n- Wire real NewStore(ctx, beadsDir) into app construction\n- beadsDir from --beads-dir flag or auto-detect (.beads in cwd)\n- Fallback to fake data if --demo flag is passed (preserves standalone testing)\n\n## Key decisions\n- Async loading via Bubble Tea commands (tea.Cmd), not blocking Init\n- Error states are screens, not panics — user can quit gracefully\n- Keep the --demo flag for development/testing convenience","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T18:47:41Z","created_by":"Megatherium","updated_at":"2026-02-21T09:17:33Z","closed_at":"2026-02-21T09:17:33Z","close_reason":"Implemented. Reviewed with bb-8pd and refined in bb-354","dependencies":[{"issue_id":"bb-hbf","depends_on_id":"bb-2p9","type":"blocks","created_at":"2026-02-19T19:48:47Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-hbf","depends_on_id":"bb-354","type":"blocks","created_at":"2026-02-20T20:40:41Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-hbf","depends_on_id":"bb-ec1","type":"blocks","created_at":"2026-02-19T19:48:47Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-hdm","title":"Refinement: Fix SQL placeholder format in Dolt Store","description":"Critical SQL placeholder format bug found during review of bb-2p9.\n\n## Files Reviewed\n- internal/data/dolt/store.go - Main Store type\n- internal/data/dolt/embedded.go - Embedded Dolt driver\n- internal/data/dolt/server.go - MySQL server driver\n- internal/data/dolt/metadata.go - Metadata parsing\n- internal/data/dolt/schema.go - Schema verification\n- internal/data/dolt/doc.go - Package documentation\n- internal/data/dolt/store_test.go - Tests\n- internal/data/dolt/metadata_test.go - Metadata tests\n\n## Strengths (What's Good)\n1. **Clean Architecture**: Clear separation of concerns across files\n2. **Interface Compliance**: Compile-time interface check present (var _ data.TicketStore = (*Store)(nil))\n3. **Excellent Error Messages**: All errors include actionable guidance (e.g., \"run 'bd init'\")\n4. **Good Test Coverage**: Comprehensive unit tests with sqlmock, covers filter combinations\n5. **Good Documentation**: Package doc with usage examples and error handling guide\n6. **Safe Resource Management**: Proper defers, cleanup on errors in connection setup\n7. **Idempotent Close**: Correct closed flag pattern to prevent double-close issues\n\n## Defects to Fix\n\n### 1. CRITICAL: SQL Placeholder Format (store.go:97-119)\nThe buildListTicketsQuery function uses PostgreSQL-style $1, $2, $3 placeholders. Both Dolt backends (embedded driver via dolthub/driver and MySQL driver via go-sql-driver/mysql) use MySQL-style ? placeholders. This will cause runtime query failures.\n\n**Current (broken):**\n```go\nif filter.Status != \"\" {\n    sb.WriteString(fmt.Sprintf(\" AND status = $%d\", argIdx))\n    args = append(args, filter.Status)\n    argIdx++\n}\n```\n\n**Should be:**\n```go\nif filter.Status != \"\" {\n    sb.WriteString(\" AND status = ?\")\n    args = append(args, filter.Status)\n}\n```\n\nThe argIdx variable and tracking is unnecessary with ? placeholders - just remove it entirely.\n\n**Files to update:**\n- store.go: Remove argIdx, change all $N to ?\n- store_test.go: Update all regex expectations from \\$1, \\$2 etc to just ?\n\n### 2. MEDIUM: Password escaping in DSN (server.go:84-88)\nPassword from BEADS_DOLT_PASSWORD env var is not escaped before being included in DSN string. If password contains special characters (@, :, /, spaces), the DSN will be malformed and connection will fail.\n\n```go\n// Current - unsafe for passwords with special chars\nif password != \"\" {\n    dsn = fmt.Sprintf(\"%s:%s@tcp(%s:%d)/%s\", user, password, host, port, database)\n}\n```\n\n**Fix options:**\n1. Use mysql.Config struct and FormatDSN() method\n2. Use net/url.UserPassword() and escape the password\n3. At minimum, document that passwords must not contain special chars\n\n### 3. MINOR: Missing test coverage\n- No test for Close() idempotency (calling Close twice should not error)\n- No test for double-close safety\n- No test for store.Close() returning error from db.Close()\n\n### 4. MINOR: Unused beadsDir parameter (server.go:21)\nThe newServerStore function has beadsDir parameter but doesn't use it (marked with _). This is intentional since server mode doesn't need local path, but worth a brief comment explaining why.\n\n### 5. COSMETIC: Duplicate package doc (doc.go vs store.go)\nBoth doc.go and store.go have package-level documentation. Consider consolidating - typically doc.go is the canonical place for package docs.\n\n## Acceptance Criteria\n- All SQL queries use ? placeholders (MySQL style)\n- Tests updated to expect ? placeholders in regex\n- All tests pass\n- Password handling is safe or documented limitation\n- Code compiles without warnings","status":"closed","priority":0,"issue_type":"bug","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T08:05:25Z","created_by":"Megatherium","updated_at":"2026-02-20T08:14:07Z","closed_at":"2026-02-20T08:14:07Z","close_reason":"Fixed all issues from review: SQL placeholders (? style), password escaping via mysql.Config, added Close() tests, and explanatory comment"}
{"id":"bb-hey","title":"Refinement: TUI Skeleton Code Quality","description":"## Issues from Review (bb-d5b)\n\n### MUST FIX:\n1. **High cyclomatic complexity (31) in model.go Update()** [gocyclo threshold: 15]\n   - Extract screen-specific update logic to separate methods\n   - Consider a screen interface with Update/View methods\n   - File: internal/ui/model.go:114\n\n2. **Confirm screen missing rendered command/prompt**\n   - Ticket spec required showing rendered command and prompt before launch\n   - Wire config.Renderer to App, use it in confirm screen\n   - Show both renderedCommand and renderedPrompt in confirmView()\n   - Files: internal/ui/app.go, internal/ui/confirm.go, internal/ui/model.go\n\n### SHOULD FIX:\n3. **if-else chains → switch statements** [gocritic]\n   - internal/ui/result.go:12\n   - internal/ui/model.go:229\n\n4. **rangeValCopy: 152 bytes copied per iteration**\n   - internal/ui/ticket_list.go:22 - use index instead of range value\n\n5. **Preallocate slice capacity** [prealloc]\n   - agent_select.go:16, harness_select.go:21, model_select.go:16, ticket_list.go:21\n\n### OPTIONAL:\n6. Basic unit tests for UI package","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T18:29:27Z","created_by":"Megatherium","updated_at":"2026-02-20T19:22:17Z","closed_at":"2026-02-20T19:22:17Z","close_reason":"Defects fixed. We can move forward.","dependencies":[{"issue_id":"bb-hey","depends_on_id":"bb-d5b","type":"discovered-from","created_at":"2026-02-20T19:29:48Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-hna","title":"Analyze and specify UI design from blunderbust_mk1.svg","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T19:53:37Z","created_by":"Megatherium","updated_at":"2026-02-21T17:28:03Z","closed_at":"2026-02-21T17:28:03Z","close_reason":"Closed"}
{"id":"bb-hub","title":"Review: TUI: Base Layout & Footer Info Rocker","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T22:20:59Z","created_by":"Megatherium","updated_at":"2026-02-21T22:52:37Z","closed_at":"2026-02-21T22:52:37Z","close_reason":"Review complete. Score: 8.0/10. Refinement ticket bb-92q created with defects to fix. Original task bb-va5 reopened and blocked by refinement."}
{"id":"bb-hvk","title":"Implement config.yaml loader with validation and template rendering","description":"Implement parsing/validation of harness definitions from YAML config and template rendering for both command and prompt strings.\n\n## Deliverables\n\n### internal/config/yaml.go (implements Loader interface)\n- Parse YAML config file defining harnesses\n- Validate: harness must have name, command_template; models/agents lists optional\n- Return actionable error messages (missing field X in harness Y, file not found, parse error)\n\n### internal/config/render.go\n- RenderCommand(harness, templateContext) (string, error) — renders command template\n- RenderPrompt(harness, templateContext) (string, error) — renders prompt template\n- Uses text/template with the TemplateContext struct from domain\n- Template errors are clear (which harness, which template, what went wrong)\n\n### config.example.yaml\n- Working example config showing 2-3 harnesses (e.g. opencode, claude-code, amp)\n- Each harness shows command_template, prompt_template, models, agents\n- Comments explaining each field\n\n### Example config shape:\n```yaml\nharnesses:\n  - name: opencode\n    command_template: \"opencode --model {{.Model}} --agent {{.Agent}}\"\n    prompt_template: \"Work on ticket {{.Ticket.ID}}: {{.Ticket.Title}}\"\n    models: [claude-sonnet-4-20250514, o3]\n    agents: [coder, task]\n  - name: amp\n    command_template: \"amp\"\n    prompt_template: \"Pick up {{.Ticket.ID}}\"\n    models: [claude-sonnet-4-20250514]\n    agents: []\n```\n\n### Unit tests\n- Parse valid config, parse invalid config (missing fields, bad YAML)\n- Template rendering with full context, with missing optional fields\n- Edge: empty models list, empty agents list, no prompt_template\n\n## Notes\n- YAML only for MVP. JSON support not needed.\n- Templates use Go text/template — no custom functions needed yet\n- Config path comes from CLI --config flag (default: ./blunderbuss.yaml)","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T18:46:17Z","created_by":"Megatherium","updated_at":"2026-02-19T21:57:26Z","closed_at":"2026-02-19T21:57:26Z","close_reason":"Implementation complete and reviewed. All deliverables met with comprehensive tests.","dependencies":[{"issue_id":"bb-hvk","depends_on_id":"bb-sxs","type":"blocks","created_at":"2026-02-19T19:48:46Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-icv","title":"Make rendered prompt available in command prompt as {{.Prompt}}","description":"Currently the rendered prompt is only available for display in the UI. It should also be available as a template variable {{.Prompt}} in the command template so it can be included in the launched command (e.g., to pass to an AI agent or append to a script).","status":"closed","priority":2,"issue_type":"feature","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T13:20:42Z","created_by":"Megatherium","updated_at":"2026-02-21T15:25:51Z","closed_at":"2026-02-21T15:25:51Z","close_reason":"Feature implemented: {{.Prompt}} variable now available in command templates. Bug fix for absolute path handling in file-based templates.","dependencies":[{"issue_id":"bb-icv","depends_on_id":"bb-4o9","type":"blocks","created_at":"2026-02-21T15:37:51Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-l6j","title":"Review: Make embedded Dolt mode optional via build tags","description":"Review the implementation of bb-tms: Build tag refactoring to make embedded Dolt mode optional, reducing default binary size from 93MB to ~11MB.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T19:53:19Z","created_by":"Megatherium","updated_at":"2026-02-22T20:05:04Z","closed_at":"2026-02-22T20:05:04Z","close_reason":"Review passed. Error message updated to mention both build options (make build-full and go build -tags=embedded)."}
{"id":"bb-lh7","title":"TUI: Sidebar Component (State & Navigation)","description":"Left vertical pane for Project/Worktree Explorer. Tree-like list with keyboard navigation.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T17:27:38Z","created_by":"Megatherium","updated_at":"2026-02-23T06:59:05Z","closed_at":"2026-02-23T06:59:05Z","close_reason":"Sidebar component implemented with worktree navigation. Review bb-zij and refinement complete.","dependencies":[{"issue_id":"bb-lh7","depends_on_id":"bb-va5","type":"blocks","created_at":"2026-02-21T18:47:40Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-lh7","depends_on_id":"bb-zij","type":"blocks","created_at":"2026-02-22T21:19:53Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-li6","title":"[BUG] No connection to dolt server","description":"Ever since I switched dolt to server mode (because embedded is sensitive, even this launcher caused panics because the window showing the state of the runner blocked the connection). Now we instantly get a \"Could not connect to database...\" `bd dolt test` says everything is cool (and the ticketing still works). Investigate and fix\n## Steps to Reproduce\nWith `timeout` and `unbuffer` you should be able to see the screen","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T10:48:56Z","created_by":"Megatherium","updated_at":"2026-02-22T11:37:18Z","closed_at":"2026-02-22T11:37:18Z","close_reason":"Fixed: default Dolt server port changed from 3306 to 3307"}
{"id":"bb-nds","title":"Wire config loader + tmux launcher into TUI (end-to-end MVP)","description":"Complete the MVP by wiring config-driven harness selection and tmux launching into the TUI flow.\n\n## Deliverables\n\n### Config integration\n- Load config from --config path on app start (default: blunderbuss.yaml in cwd)\n- Config error → clear error screen (file not found, parse error, validation error)\n- Harness/model/agent selection screens populated from loaded config\n\n### Launch integration\n- Confirm screen shows: ticket ID+title, harness, model, agent, rendered command, rendered prompt\n- Enter on confirm → calls Launcher.Launch with assembled LaunchSpec\n- Result screen shows success (window name, ID) or failure (error message)\n- --dry-run works end-to-end: confirm screen shows \"[DRY RUN]\" badge, result shows what would have run\n\n### Monitoring integration\n- After launch, result screen shows live status of tmux window (Running/Dead)\n- Poll with tea.Tick every 2-3 seconds\n- Status display: 🟢 Running / 🔴 Dead / ⚪ Unknown\n\n### cmd/blunderbuss/main.go final wiring\n- Composition root creates: TicketStore + ConfigLoader + TmuxLauncher + App\n- All flags: --config, --beads-dir, --dsn, --dry-run, --debug, --demo\n- Clean shutdown: close DB connections, release locks\n\n## This ticket produces the working MVP\nAfter this, you can: run blunderbuss inside tmux → see tickets from beads → pick harness/model/agent → confirm → launch in new tmux window → see if it's running.\n\n## Key decisions\n- Composition root pattern: main.go does all wiring, app receives only interfaces\n- Monitoring is simple polling — no goroutine management complexity\n- Dry-run is a first-class mode, not an afterthought","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T18:48:07Z","created_by":"Megatherium","updated_at":"2026-02-21T09:50:02Z","closed_at":"2026-02-21T09:50:02Z","close_reason":"MVP complete: config loading, launch integration with rendered commands, status monitoring, all flags wired. Review passed with minor lint fixes in bb-btg.","dependencies":[{"issue_id":"bb-nds","depends_on_id":"bb-7cv","type":"blocks","created_at":"2026-02-21T10:38:24Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-nds","depends_on_id":"bb-fi8","type":"blocks","created_at":"2026-02-19T19:48:48Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-nds","depends_on_id":"bb-hbf","type":"blocks","created_at":"2026-02-19T19:48:48Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-nds","depends_on_id":"bb-hvk","type":"blocks","created_at":"2026-02-19T19:48:47Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-nds","depends_on_id":"bb-yh0","type":"blocks","created_at":"2026-02-21T10:21:27Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-nvr","title":"Review: Arcade Select Visual Polish","description":"Review the visual design and interactive elements added to bb-bc0. Focus on: footer background colors, active/inactive rounded column frames, multiline Harness delegates, faint column dimming, and the 'i' floating modal for ticket preview.\nCAUTION: so mongrel already committed internal/ui/model.go so you'll to work with the diff or however you see fit to see the changes.\n","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T12:30:46Z","created_by":"Megatherium","updated_at":"2026-02-22T17:02:18Z","closed_at":"2026-02-22T17:02:18Z","close_reason":"Approved and merged"}
{"id":"bb-ooj","title":"Review: bb-7ah Implement real tmux Launcher","notes":"Review Score: 8.5/10\n\n## Strengths\n- Clean CommandRunner abstraction for testability\n- Proper interface compliance with exec.Launcher\n- 97.3% test coverage, well-structured test cases\n- Clear documentation (doc.go)\n- Good error handling with tmux context guard\n\n## Issues Found\n1. Unused statusChecker field in Launcher struct (launcher.go:22)\n2. Orphaned internal/exec/fake/launcher.go with no references\n\n## Outcome\nRefinement ticket bb-bcb created for code hygiene.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T19:27:39Z","created_by":"Megatherium","updated_at":"2026-02-20T19:45:20Z","closed_at":"2026-02-20T19:45:20Z","close_reason":"Closed","dependencies":[{"issue_id":"bb-ooj","depends_on_id":"bb-bcb","type":"blocks","created_at":"2026-02-20T20:41:36Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-pcr","title":"Refinement: TUI: Base Layout & Footer Info Rocker","description":"Fix issue where the layout isn't filling the full width properly because JoinVertical with Left is not aligning the view to take up full width. Instead use JoinVertical(lipgloss.Top... to join the main view and the footer with the main view expanding.","status":"closed","priority":2,"issue_type":"bug","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T22:22:26Z","created_by":"Megatherium","updated_at":"2026-02-21T22:23:41Z","closed_at":"2026-02-21T22:23:41Z","close_reason":"Closed"}
{"id":"bb-pd5","title":"Optimize build pipeline (FIPS + ldflags)","description":"## Problem\n- Binary contains 32MB static buffer for crypto/internal/fips140/drbg.memory (FIPS 140-3)\n- Current builds include symbol tables and DWARF info\n\n## Goals\n1. Disable FIPS 140-3: Set GOFIPS140=off in CI/CD, verify no dependency forces FIPS mode\n2. Add strip flags to Makefile: -ldflags=\"-s -w\"\n3. Consider adding tags: gms_pure_go, osusergo, netgo (if applicable)\n\n## Expected Result\nReduce binary size by ~30-40MB","notes":"Investigation complete. The 32MB FIPS buffer is in BSS (runtime memory), not the binary file. GOFIPS140=off was added to Makefile but does not reduce file size. Binary remains 93MB. Size reduction would require refactoring to use Dolt server mode exclusively to eliminate cloud provider dependencies.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T14:52:12Z","created_by":"Megatherium","updated_at":"2026-02-22T19:33:42Z","closed_at":"2026-02-22T19:33:42Z","close_reason":"Review passed (bb-3xb). GOFIPS140=off successfully added to Makefile build, debug, and install targets. Investigation confirmed the 32MB FIPS buffer is in BSS (runtime memory), not binary file size.","dependencies":[{"issue_id":"bb-pd5","depends_on_id":"bb-3xb","type":"blocks","created_at":"2026-02-22T20:01:12Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-q5v","title":"Add validation for duplicate harness names in config","description":"The YAML loader doesn't validate for duplicate harness names. This could cause ambiguity downstream when selecting harnesses by name. Should return an actionable error like 'duplicate harness name \"foo\" at index N (first defined at index M)'.","status":"closed","priority":4,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T06:44:25Z","created_by":"Megatherium","updated_at":"2026-02-21T17:21:08Z","closed_at":"2026-02-21T17:21:08Z","close_reason":"Implementation complete and review passed (bb-fvg). Duplicate harness name validation added with comprehensive test coverage.","dependencies":[{"issue_id":"bb-q5v","depends_on_id":"bb-fvg","type":"blocks","created_at":"2026-02-21T18:17:37Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-q7u","title":"QA: TUI Automated Testing","description":"Add programmatic buffer capture tests using teatest to verify keyboard navigation and state changes.","status":"open","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T17:27:41Z","created_by":"Megatherium","updated_at":"2026-02-21T17:27:41Z","dependencies":[{"issue_id":"bb-q7u","depends_on_id":"bb-0vw","type":"blocks","created_at":"2026-02-21T18:47:42Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-sxs","title":"[PRO] Define core domain types and service interfaces","description":"Create stable contracts between layers so later tickets can be implemented independently and tested with fakes. No real DB/tmux/UI logic — only types, interfaces, and minimal stub/fake implementations.\n\n## Deliverables\n\n### internal/domain/types.go\n- Ticket struct: ID, Title, Description, Status, Priority, IssueType, Assignee, CreatedAt, UpdatedAt (match beads issues table schema — see tmp/schema.go for full column list, cherry-pick what's useful for display and context)\n- Harness struct: Name, CommandTemplate (Go text/template string), PromptTemplate (Go text/template string), SupportedModels []string, SupportedAgents []string, Env map[string]string\n- Selection struct: Ticket + Harness + Model + Agent (the user's complete choice)\n- LaunchSpec struct: Selection + RenderedCommand string + RenderedPrompt string + WindowName string\n- LaunchResult struct: WindowName, WindowID (optional), PaneID (optional), Error\n- Config struct: Harnesses []Harness, Defaults (optional, for future quickdraw/blitzdraw)\n\n### internal/domain/template_context.go\n- TemplateContext struct — the fat context passed to both command and prompt templates. Include everything: Ticket fields, Harness name, Model, Agent, Repo path, Branch, etc. Generous — templates pick what they need.\n\n### internal/data/store.go\n- type TicketStore interface { ListTickets(ctx context.Context, filter TicketFilter) ([]domain.Ticket, error) }\n- TicketFilter struct: Status, IssueType, Limit, Search\n\n### internal/config/loader.go\n- type Loader interface { Load(path string) (*domain.Config, error) }\n\n### internal/exec/launcher.go\n- type Launcher interface { Launch(ctx context.Context, spec domain.LaunchSpec) (*domain.LaunchResult, error) }\n\n### internal/data/fake/, internal/exec/fake/\n- FakeTicketStore and FakeLauncher for testing and UI development without real deps\n\n## Key design decisions\n- UI depends ONLY on interfaces + domain types, never on concrete implementations\n- Template context is intentionally generous — security is not a concern (launching tools with broad access anyway)\n- TicketFilter is kept simple for MVP — no pagination yet\n- Interfaces are minimal (one method each where possible) — easy to implement, easy to fake","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T18:46:02Z","created_by":"Megatherium","updated_at":"2026-02-19T21:37:54Z","closed_at":"2026-02-19T21:37:54Z","close_reason":"Closed","dependencies":[{"issue_id":"bb-sxs","depends_on_id":"bb-sza","type":"blocks","created_at":"2026-02-19T22:28:21Z","created_by":"Megatherium","metadata":"{}"},{"issue_id":"bb-sxs","depends_on_id":"bb-v9x","type":"blocks","created_at":"2026-02-19T19:48:46Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-sza","title":"Review: Define core domain types and service interfaces","description":"Review the implementation of bb-sxs. Check types, interfaces, and fakes for completeness, correctness, and alignment with the ticket spec.","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T21:28:18Z","created_by":"Megatherium","updated_at":"2026-02-19T21:37:54Z","closed_at":"2026-02-19T21:37:54Z","close_reason":"Review passed with score 9.0/10. All deliverables complete, clean architecture, good fakes."}
{"id":"bb-tms","title":"Make embedded Dolt mode optional via build tags","description":"## Problem\\nCurrent builds always include embedded Dolt support, pulling in 68 cloud provider dependencies and inflating binary to 93MB. Many users only need server mode.\\n\\n## Goals\\nImplement optional build configuration:\\n\\n1. **Default build** (no tags): Server mode only\\n   - Uses go-sql-driver/mysql (~100KB)\\n   - Estimated size: ~20-30MB\\n   - Requires running dolt sql-server externally\\n\\n2. **Full build** (-tags=embedded): Server + Embedded modes\\n   - Includes github.com/dolthub/driver with CGO\\n   - Current 93MB size\\n   - Works out of the box\\n\\n## Implementation Plan\\n1. Create build-tagged variants:\\n   -  (default): Server-only implementation\\n   -  (//go:build embedded): Embedded implementation\\n\\n2. Common interface in store.go for mode selection\\n\\n3. Update Makefile:\\n   - GOFIPS140=off go build -ldflags \"-s -w -X main.Version=aebecc5-dirty -X main.BuildTime=2026-02-22T19:11:06Z\" -o bdb ./cmd/blunderbust\nBuilt: bdb: Default server-only build\\n   - : Build with embedded support\\n\\n4. Runtime behavior:\\n   - Default build: Returns error if metadata specifies embedded mode\\n   - Full build: Supports both modes as today\\n\\n## Acceptance Criteria\\n- [ ] Default build produces binary < 30MB\\n- [ ] Full build maintains current functionality\\n- [ ] Clear error message when embedded requested but not available\\n- [ ] Makefile targets documented","design":"Build tag structure:\\n- Default (no tags): server mode only\\n- 'embedded' tag: includes embedded driver\\n\\nMakefile targets:\\n- build: server-only (default)\\n- build-full: with embedded support\\n\\nCode organization:\\n- store.go: Common interface and mode selection\\n- store_server.go: Server implementation (always included)\\n- store_embedded.go: +build embedded - embedded implementation","status":"closed","priority":2,"issue_type":"feature","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T19:11:10Z","created_by":"Megatherium","updated_at":"2026-02-22T20:05:09Z","closed_at":"2026-02-22T20:05:09Z","close_reason":"All acceptance criteria met. Default build: ~11MB. Full build: ~93MB. Error message mentions both build options. Documentation updated.","dependencies":[{"issue_id":"bb-tms","depends_on_id":"bb-l6j","type":"blocks","created_at":"2026-02-22T20:53:24Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-v9x","title":"Bootstrap Go module, repo layout, and build scaffolding","description":"Create the initial Go project structure and minimal CLI entrypoint that compiles. This is the foundation everything else depends on.\n\n## Deliverables\n- go.mod (module github.com/megatherium/blunderbuss)\n- cmd/blunderbuss/main.go — minimal CLI entrypoint with cobra or just flag, parsing --config, --dsn, --dry-run, --debug\n- internal/ package layout: domain/, data/, config/, exec/, ui/ (empty packages with doc.go ok)\n- Makefile with build, run, lint targets\n- .gitignore for Go\n- README.md stub (project name, one-liner, how to build)\n\n## Decisions to lock in\n- Go module path: github.com/megatherium/blunderbuss\n- CLI framework: keep it simple (stdlib flag or cobra — agent's call, but be consistent)\n- Project layout follows standard Go project layout (cmd/, internal/)\n- Composition root lives in cmd/blunderbuss/main.go — all wiring happens there\n- GPL-3 license header convention for source files","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-19T18:45:43Z","created_by":"Megatherium","updated_at":"2026-02-19T20:26:22Z","closed_at":"2026-02-19T20:26:22Z","close_reason":"Closed","dependencies":[{"issue_id":"bb-v9x","depends_on_id":"bb-3zg","type":"blocks","created_at":"2026-02-19T19:48:48Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-va5","title":"TUI: Base Layout & Footer Info Rocker","description":"Foundational Bubble Tea layout with main workspace and bottom rocker footer for context-aware shortcuts.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-21T17:27:37Z","created_by":"Megatherium","updated_at":"2026-02-21T22:56:26Z","closed_at":"2026-02-21T22:56:26Z","close_reason":"Refinement bb-92q complete. Changes were small refactors (keybinding extraction, constants, tests). No second review needed.","dependencies":[{"issue_id":"bb-va5","depends_on_id":"bb-92q","type":"blocks","created_at":"2026-02-21T23:52:12Z","created_by":"Megatherium","metadata":"{}"}]}
{"id":"bb-w07","title":"Decouple SQL engine to reduce binary size","description":"## Problem\nThe binary includes github.com/dolthub/go-mysql-server (~40-60MB) and pulls in transitive AWS SDK dependencies that aren't actually used.\n\n## Goal\nRefactor database connection to use lightweight Dolt SQL Driver (github.com/dolthub/driver) via standard database/sql interface.\n\n## Notes\n- This will also remove the transitive AWS SDK dependencies\n- Keep the TicketStore interface contract from internal/data/store.go\n- Verify functionality works after refactor","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T14:51:49Z","created_by":"Megatherium","updated_at":"2026-02-23T08:24:08Z","closed_at":"2026-02-23T08:24:08Z","close_reason":"Ticket already completed by bb-tms: server-only build is already decoupled and doesn't include heavy dependencies (binary size 11MB)"}
{"id":"bb-yh0","title":"Read config from real yaml files","description":"Replace the hardcoded Harness options in the UI with the real YAML parsed config Loader.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-20T18:21:24Z","created_by":"Megatherium","updated_at":"2026-02-21T09:49:54Z","closed_at":"2026-02-21T09:49:54Z","close_reason":"Superseded by bb-nds - config loading implemented in MVP"}
{"id":"bb-yh7","title":"Review: bb-3nf Project Rename","description":"Review the project rename from blunderbuss to blunderbust.\n\n## Files to Review\n- go.mod - Module path change\n- All internal/*/*.go files - Import path updates (35 files)\n- internal/discovery/models.go - Cache directory path\n- internal/data/dolt/embedded.go - Dolt commit metadata\n- internal/exec/tmux/launcher.go - Error messages\n- internal/domain/types.go, doc.go - Package documentation\n- README.md, AGENTS.md - User documentation\n- .gitignore - Binary names\n\n## Review Criteria\n- All import paths correctly updated to github.com/megatherium/blunderbust\n- No remaining 'blunderbuss' references in code\n- Cache directory correctly set to ~/.cache/blunderbust\n- Binary name remains 'bdb' as specified\n- Documentation fully updated\n- All tests pass\n\n## Deliverable\nScore (0.0-10.0) and decision:\n- Score < 8.5: Create refinement ticket listing all defects\n- Score >= 8.5: Pass or optional minor cleanup","notes":"ADDITIONAL CHANGES (config directory):\n\n## Also Review\n- cmd/blunderbuss/main.go:71-82 - Config path resolution logic\n  - Now checks ~/.config/blunderbust/config.yaml first\n  - Falls back to ./config.yaml if XDG config doesn't exist\n- cmd/blunderbuss/main.go:40 - Updated --config flag help text\n- README.md:68,116,215 - Updated config path documentation\n- AGENTS.md - Changed ./blunderbust to bdb throughout","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T07:53:01Z","created_by":"Megatherium","updated_at":"2026-02-22T08:59:10Z","closed_at":"2026-02-22T08:59:10Z","close_reason":"Review completed. Score: 9.2/10. Minor defect found: /blunderbuss still in .gitignore (line 2). Refinement bb-exv created to fix."}
{"id":"bb-zij","title":"Review: TUI Sidebar Component (State & Navigation)","description":"Review the implementation of bb-lh7 (TUI Sidebar Component). Check for: code quality, maintainability, proper test coverage, and adherence to project patterns.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-22T20:19:08Z","created_by":"Megatherium","updated_at":"2026-02-22T22:25:18Z","closed_at":"2026-02-22T22:25:18Z","close_reason":"Review completed. Quality score: 8.5/10. Implementation is solid with clean architecture, proper Bubbletea patterns, and comprehensive keyboard navigation. Minor non-blocking issues identified but no mandatory refinement required."}
